"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[995],{75995:function(e,t,r){r.d(t,{Gj:function(){return eZ}});var a,n=r(83454),s=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,u=(a=function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')},"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(a,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):a),h=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},c=(e,t,r)=>(h(e,t,"read from private field"),r?r.call(e):t.get(e)),p=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},y=(e,t,r,a)=>(h(e,t,"write to private field"),a?a.call(e,r):t.set(e,r),r),w=(e,t,r)=>(h(e,t,"access private method"),r),d="u">typeof n&&n.release&&"node"===n.release.name;if(globalThis.document);else if(globalThis.importScripts);else if(d);else throw Error("Cannot determine runtime environment");function f(){let e={resolve:e=>{},reject:e=>{},promise:null},t=new Promise((t,r)=>{e.resolve=t,e.reject=r});return e.promise=t,e}function g(e,t,r,...a){return null===e||"object"!=typeof e?e:t(e)?r(e,...a):Array.isArray(e)||ArrayBuffer.isView(e)?e.map(e=>g(e,t,r,...a)):Object.fromEntries(Object.entries(e).map(([e,n],s)=>[e,g(n,t,r,...a)]))}function m(e,t){let r=new XMLHttpRequest;r.open("get",e,!0),r.onload=()=>{t(new Worker(URL.createObjectURL(new Blob([r.responseText]))))},r.send()}function b(e){if(d)return!1;let t=new URL(location.href),r=new URL(e,location.origin);return!(t.host===r.host&&t.port===r.port&&t.protocol===r.protocol)}var v=new WeakMap;function R(){let e=Array.from({length:4},_).join("-");if(63!==e.length)throw Error("comlink internal error: UUID has the wrong length");return e}function _(){let e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16),t=15-e.length;return t>0&&(e=Array.from({length:t},()=>0).join("")+e),e}function E(e,t,r){return k({type:"response",data:{uuid:e,resp:t}},r)}function k(e,t){return t&&v.set(e,t),e}var A=new TextEncoder;new TextDecoder("utf-8");var j=new TextEncoder;async function S(e,t,r){try{let{taskId:a,sizeBuffer:n,dataBuffer:s,signalBuffer:i}=t,o=A.encode(JSON.stringify(r)),l=o.length<=s.length;if(Atomics.store(n,0,o.length),Atomics.store(n,1,+l),!l){let t;let[r,n]=[t=R(),new Promise(r=>{d?e.once("message",e=>{e.id&&e.id===t&&r(e)}):e.addEventListener("message",function a(n){n.data&&n.data.id&&n.data.id===t&&(e.removeEventListener("message",a),r(n.data))}),e.start&&e.start()})];s.set(j.encode(r)),await T(i,a),s=(await n).dataBuffer}s.set(o),Atomics.store(n,1,1),await T(i,a)}catch(e){console.warn(e)}}async function T(e,t){let r=(t>>1)%32,a=1;for(;0!==Atomics.compareExchange(e,r+1,0,t);)await function(e){return new Promise(t=>setTimeout(t,e))}(a),a<32&&(a*=2);Atomics.or(e,0,1<<r),Atomics.notify(e,0)}var W,M,O,N,x=class{constructor(){p(this,O),p(this,W,void 0),p(this,M,void 0),y(this,M,[]),y(this,W,[])}put(e){c(this,M).length||w(this,O,N).call(this),c(this,M).shift()(e)}async get(){return c(this,W).length||w(this,O,N).call(this),c(this,W).shift()}isEmpty(){return!c(this,W).length}isBlocked(){return!!c(this,M).length}get length(){return c(this,W).length-c(this,M).length}};function C(e){return e&&"object"==typeof e&&"payloadType"in e&&"obj"in e&&"ptr"===e.payloadType}W=new WeakMap,M=new WeakMap,O=new WeakSet,N=function(){c(this,W).push(new Promise(e=>{c(this,M).push(e)}))};var P,q=class{constructor(){this.inputQueue=new x,this.outputQueue=new x,p(this,P,new Map)}async read(){return await this.outputQueue.get()}async flush(){let e=[];for(;!this.outputQueue.isEmpty();)e.push(await this.read());return e}write(e){this.inputQueue.put(e)}async request(e,t){let r=k({type:"request",data:{uuid:R(),msg:e}},t),{resolve:a,reject:n,promise:s}=f();return c(this,P).set(r.data.uuid,{resolve:a,reject:n}),this.write(r),s}resolveResponse(e){let t=e.data.uuid,r=c(this,P).get(t);if(r){let a,n=e.data.resp;c(this,P).delete(t),"err"===n.payloadType?r.reject(((a=Error(n.obj.message)).name=n.obj.name,a.stack=n.obj.stack,a)):r.resolve(n)}else console.warn("Can't find request.")}};P=new WeakMap,new TextDecoder("utf-8"),new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new Int32Array(new ArrayBuffer(4));var L={};d&&(globalThis.Worker=u("worker_threads").Worker);var U,I,J,D,V=class extends q{constructor(e){super(),p(this,I),p(this,U,void 0),this.close=()=>{},p(this,D,async(e,t)=>{if(!(!t||!t.type))switch(t.type){case"resolve":y(this,U,new Int32Array(t.data)),this.resolve();return;case"response":this.resolveResponse(t);return;default:this.outputQueue.put(t);return;case"sync-request":{let r=t.data.msg,a=t.data.reqData;if("read"===r.type){let t=await this.inputQueue.get();await S(e,a,t)}else throw TypeError(`Unsupported request type '${r.type}'.`);return}case"request":throw TypeError("Can't send messages of type 'request' from a worker. Please Use 'sync-request' instead.")}});let t=t=>{w(this,I,J).call(this,t),this.close=()=>t.terminate();let r={type:"init",data:{config:e,channelType:ee.SharedArrayBuffer}};t.postMessage(r)};b(e.baseUrl)?m(`${e.baseUrl}webr-worker.js`,e=>t(e)):t(new Worker(`${e.baseUrl}webr-worker.js`)),{resolve:this.resolve,promise:this.initialised}=f()}interrupt(){if(!c(this,U))throw Error("Failed attempt to interrupt before initialising interruptBuffer");c(this,U)[0]=1}};U=new WeakMap,I=new WeakSet,J=function(e){d?e.on("message",t=>{c(this,D).call(this,e,t)}):e.onmessage=t=>c(this,D).call(this,e,t.data)},D=new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,d&&(globalThis.Worker=u("worker_threads").Worker);var F,B,G,H,K,$,Q,z,X,Y,Z=class extends q{constructor(e){super(),p(this,H),p(this,$),p(this,z),this.close=()=>{},p(this,F,new Map),p(this,B,void 0),p(this,G,!1),p(this,Y,async(e,t)=>{if(!(!t||!t.type))switch(t.type){case"resolve":this.resolve();return;case"response":this.resolveResponse(t);return;default:this.outputQueue.put(t);return;case"sync-request":{let e=t.data;c(this,F).set(e.data.uuid,e.data.msg);return}case"request":throw TypeError("Can't send messages of type 'request' from a worker.Use service worker fetch request instead.")}});let t=t=>{w(this,z,X).call(this,t),this.close=()=>t.terminate(),w(this,H,K).call(this,`${e.serviceWorkerUrl}webr-serviceworker.js`).then(r=>{let a={type:"init",data:{config:e,channelType:ee.ServiceWorker,clientId:r,location:window.location.href}};t.postMessage(a)})};b(e.serviceWorkerUrl)?m(`${e.serviceWorkerUrl}webr-worker.js`,e=>t(e)):t(new Worker(`${e.serviceWorkerUrl}webr-worker.js`)),{resolve:this.resolve,promise:this.initialised}=f()}activeRegistration(){var e;if(!(null!=(e=c(this,B))&&e.active))throw Error("Attempted to obtain a non-existent active registration.");return c(this,B).active}interrupt(){y(this,G,!0)}};F=new WeakMap,B=new WeakMap,G=new WeakMap,H=new WeakSet,K=async function(e){y(this,B,await navigator.serviceWorker.register(e)),await navigator.serviceWorker.ready,window.addEventListener("beforeunload",()=>{var e;null==(e=c(this,B))||e.unregister()});let t=await new Promise(e=>{navigator.serviceWorker.addEventListener("message",function t(r){"registration-successful"===r.data.type&&(navigator.serviceWorker.removeEventListener("message",t),e(r.data.clientId))}),this.activeRegistration().postMessage({type:"register-client-main"})});return navigator.serviceWorker.addEventListener("message",e=>{w(this,$,Q).call(this,e)}),t},$=new WeakSet,Q=async function(e){if("request"===e.data.type){let t=e.data.data,r=c(this,F).get(t);if(!r)throw Error("Request not found during service worker XHR request");switch(c(this,F).delete(t),r.type){case"read":{let e=await this.inputQueue.get();this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:t,response:E(t,e)});break}case"interrupt":{let e=c(this,G);this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:t,response:E(t,e)}),y(this,G,!1);break}default:throw TypeError(`Unsupported request type '${r.type}'.`)}return}},z=new WeakSet,X=function(e){d?e.on("message",t=>{c(this,Y).call(this,e,t)}):e.onmessage=t=>c(this,Y).call(this,e,t.data)},Y=new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap;var ee={Automatic:0,SharedArrayBuffer:1,ServiceWorker:2},et=d?__dirname+"/":"https://webr.r-wasm.org/v0.1.1/";function er(e){return e&&("object"==typeof e||"function"==typeof e)&&"payloadType"in e&&C(e._payload)}var ea={null:0,symbol:1,pairlist:2,closure:3,environment:4,promise:5,call:6,special:7,builtin:8,string:9,logical:10,integer:13,double:14,complex:15,character:16,dots:17,any:18,list:19,expression:20,bytecode:21,pointer:22,weakref:23,raw:24,s4:25,new:30,free:31,function:99};function en(e){return e&&"object"==typeof e&&Object.keys(ea).includes(e.type)}function es(e){return e&&"object"==typeof e&&"re"in e&&"im"in e}function ei(e){return L._Rf_protect(ec(e)),e}function eo(e,t){return L._Rf_protect(ec(e)),++t.n,e}function el(e){L._Rf_unprotect(e)}function eu(e,t,r){L._Rf_defineVar(ec(t),ec(r),ec(e))}function eh(e,t){return L.LDSO.loadedLibsByName["/usr/lib/R/library/webr/libs/webr.so"].module.ffi_safe_eval(ec(e),ec(t))}function ec(e){return e instanceof eg?e.ptr:e}function ep(e,t){if(L._TYPEOF(e.ptr)!==ea[t])throw Error(`Unexpected object type "${e.type()}" when expecting type "${t}"`)}var ey,ew,ed=class{constructor(e){this.ptr=e}type(){let e=L._TYPEOF(this.ptr);return Object.keys(ea).find(t=>ea[t]===e)}},ef=class extends ed{constructor(e){if(!(e instanceof ed))return function(e){if(en(e))return new(eB(ea[e.type]))(e);if(e&&"object"==typeof e&&"type"in e&&"null"===e.type)return new eb;if(null===e)return new eW({type:"logical",names:null,values:[null]});if("boolean"==typeof e)return new eW(e);if("number"==typeof e)return new eC(e);if("string"==typeof e)return new eJ(e);if(es(e))return new eL(e);if(Array.isArray(e))return function(e){let t={n:0};try{let r=new e_([new ev("c"),...e]);return eo(r,t),r.eval()}finally{el(t.n)}}(e);throw Error("Robj construction for this JS object is not yet supported")}(e);super(e.ptr),p(this,ey)}static wrap(e){return new(eB(L._TYPEOF(e)))(new ed(e))}get[Symbol.toStringTag](){return`RObject:${this.type()}`}static getPersistentObject(e){return ez[e]}getPropertyValue(e){return this[e]}inspect(){!function(e,t){let r={},a={n:0};try{let n=new ej(t);eo(n,a),r.code=L.allocateUTF8(e);let s=L._R_ParseEvalString(r.code,n.ptr);return eg.wrap(s)}finally{(function(e){Object.keys(e).forEach(t=>L._free(e[t]))})(r),el(a.n)}}(".Internal(inspect(x))",{x:this})}isNull(){return L._TYPEOF(this.ptr)===ea.null}isUnbound(){return this.ptr===ez.unboundValue.ptr}attrs(){return eR.wrap(L._ATTRIB(this.ptr))}setNames(e){let t;if(null===e)t=ez.null;else if(Array.isArray(e)&&e.every(e=>"string"==typeof e||null===e))t=new eJ(e);else throw Error("Argument to setNames must be null or an Array of strings or null");return L._Rf_setAttrib(this.ptr,ez.namesSymbol.ptr,t.ptr),this}names(){let e=eJ.wrap(L._Rf_getAttrib(this.ptr,ez.namesSymbol.ptr));return e.isNull()?null:e.toArray()}includes(e){let t=this.names();return t&&t.includes(e)}toJs(e={depth:0},t=1){throw Error("This R object cannot be converted to JS")}subset(e){return w(this,ey,ew).call(this,e,ez.bracketSymbol.ptr)}get(e){return w(this,ey,ew).call(this,e,ez.bracket2Symbol.ptr)}getDollar(e){return w(this,ey,ew).call(this,e,ez.dollarSymbol.ptr)}pluck(...e){var t;let r;let a=(t=ez.null,r=L._malloc(4),L._R_ProtectWithIndex(ec(t),r),{loc:L.getValue(r,"i32"),ptr:r});try{let t=e.reduce((e,t)=>{var r;return r=e.get(t),L._R_Reprotect(ec(r),a.loc),r},this);return t.isNull()?void 0:t}finally{L._Rf_unprotect(1),L._free(a.ptr)}}set(e,t){let r={n:0};try{let a=new ef(e);eo(a,r);let n=new ef(t);eo(n,r);let s=new ev("[[<-"),i=L._Rf_lang4(s.ptr,this.ptr,a.ptr,n.ptr);return eo(i,r),ef.wrap(eh(i,ez.baseEnv))}finally{el(r.n)}}static getMethods(e){let t=new Set,r=e;do Object.getOwnPropertyNames(r).map(e=>t.add(e));while(r=Object.getPrototypeOf(r));return[...t.keys()].filter(t=>"function"==typeof e[t])}},eg=ef;ey=new WeakSet,ew=function(e,t){let r={n:0};try{let a=new ef(e);eo(a,r);let n=L._Rf_lang3(t,this.ptr,a.ptr);return eo(n,r),ef.wrap(eh(n,ez.baseEnv))}finally{el(r.n)}};var em,eb=class extends eg{constructor(){return super(new ed(L.getValue(L._R_NilValue,"*"))),this}toJs(){return{type:"null"}}},ev=class extends eg{constructor(e){if(e instanceof ed){ep(e,"symbol"),super(e);return}let t=L.allocateUTF8(e);try{super(new ed(L._Rf_install(t)))}finally{L._free(t)}}toJs(){let e=this.toObject();return{type:"symbol",printname:e.printname,symvalue:e.symvalue,internal:e.internal}}toObject(){return{printname:this.printname().isUnbound()?null:this.printname().toString(),symvalue:this.symvalue().isUnbound()?null:this.symvalue().ptr,internal:this.internal().isNull()?null:this.internal().ptr}}toString(){return this.printname().toString()}printname(){return eA.wrap(L._PRINTNAME(this.ptr))}symvalue(){return eg.wrap(L._SYMVALUE(this.ptr))}internal(){return eg.wrap(L._INTERNAL(this.ptr))}},eR=class extends eg{constructor(e){if(e instanceof ed)return ep(e,"pairlist"),super(e),this;let t={n:0};try{let{names:r,values:a}=eF(e),n=eR.wrap(L._Rf_allocList(a.length));eo(n,t);for(let[e,t]=[0,n];!t.isNull();[e,t]=[e+1,t.cdr()])t.setcar(new eg(a[e]));n.setNames(r),super(n)}finally{el(t.n)}}get length(){return this.toArray().length}toArray(e={depth:1}){return this.toJs(e).values}toObject({allowDuplicateKey:e=!0,allowEmptyKey:t=!1,depth:r=1}={}){let a=this.entries({depth:r}),n=a.map(([e,t])=>e);if(!e&&new Set(n).size!==n.length)throw Error("Duplicate key when converting pairlist without allowDuplicateKey enabled");if(!t&&n.some(e=>!e))throw Error("Empty or null key when converting pairlist without allowEmptyKey enabled");return Object.fromEntries(a.filter((e,t)=>a.findIndex(t=>t[0]===e[0])===t))}entries(e={depth:1}){let t=this.toJs(e);return t.values.map((e,r)=>[t.names?t.names[r]:null,e])}toJs(e={depth:0},t=1){let r=[],a=!1,n=[];for(let s=this;!s.isNull();s=s.cdr()){let i=s.tag();i.isNull()?r.push(""):(a=!0,r.push(i.toString())),e.depth&&t>=e.depth?n.push(s.car()):n.push(s.car().toJs(e,t+1))}return{type:"pairlist",names:a?r:null,values:n}}includes(e){return e in this.toObject()}setcar(e){L._SETCAR(this.ptr,e.ptr)}car(){return eg.wrap(L._CAR(this.ptr))}cdr(){return eg.wrap(L._CDR(this.ptr))}tag(){return eg.wrap(L._TAG(this.ptr))}},e_=class extends eg{constructor(e){if(e instanceof ed)return ep(e,"call"),super(e),this;let t={n:0};try{let{values:r}=eF(e),a=r.map(e=>eo(new eg(e),t)),n=e_.wrap(L._Rf_allocVector(ea.call,r.length));eo(n,t);for(let[e,t]=[0,n];!t.isNull();[e,t]=[e+1,t.cdr()])t.setcar(a[e]);super(n)}finally{el(t.n)}}setcar(e){L._SETCAR(this.ptr,e.ptr)}car(){return eg.wrap(L._CAR(this.ptr))}cdr(){return eg.wrap(L._CDR(this.ptr))}eval(){return eg.wrap(eh(this.ptr,ez.baseEnv))}},eE=class extends eg{constructor(e){if(e instanceof ed)return ep(e,"list"),super(e),this;let t={n:0};try{let{names:r,values:a}=eF(e),n=L._Rf_allocVector(ea.list,a.length);eo(n,t),a.forEach((e,t)=>{L._SET_VECTOR_ELT(n,t,new eg(e).ptr)}),eg.wrap(n).setNames(r),super(new ed(n))}finally{el(t.n)}}get length(){return L._LENGTH(this.ptr)}toArray(e={depth:1}){return this.toJs(e).values}toObject({allowDuplicateKey:e=!0,allowEmptyKey:t=!1,depth:r=1}={}){let a=this.entries({depth:r}),n=a.map(([e,t])=>e);if(!e&&new Set(n).size!==n.length)throw Error("Duplicate key when converting list without allowDuplicateKey enabled");if(!t&&n.some(e=>!e))throw Error("Empty or null key when converting list without allowEmptyKey enabled");return Object.fromEntries(a.filter((e,t)=>a.findIndex(t=>t[0]===e[0])===t))}entries(e={depth:1}){let t=this.toJs(e);return t.values.map((e,r)=>[t.names?t.names[r]:null,e])}toJs(e={depth:0},t=1){return{type:"list",names:this.names(),values:[...Array(this.length).keys()].map(r=>e.depth&&t>=e.depth?this.get(r+1):this.get(r+1).toJs(e,t+1))}}},ek=class extends eg{exec(...e){let t={n:0};try{let r=new e_([this,...e]);return eo(r,t),r.eval()}finally{el(t.n)}}},eA=class extends eg{constructor(e){if(e instanceof ed){ep(e,"string"),super(e);return}let t=L.allocateUTF8(e);try{super(new ed(L._Rf_mkChar(t)))}finally{L._free(t)}}toString(){return L.UTF8ToString(L._R_CHAR(this.ptr))}toJs(){return{type:"string",value:this.toString()}}},ej=class extends eg{constructor(e={}){if(e instanceof ed)return ep(e,"environment"),super(e),this;let t=0;try{let{names:r,values:a}=eF(e),n=ei(L._R_NewEnv(ez.globalEnv.ptr,0,0));++t,a.forEach((e,t)=>{let a=r?r[t]:null;if(!a)throw Error("Can't create object in new environment with empty symbol name");let s=new ev(a),i=ei(new eg(e));try{eu(n,s,i)}finally{el(1)}}),super(new ed(n))}finally{el(t)}}ls(e=!1,t=!0){return eJ.wrap(L._R_lsInternal3(this.ptr,Number(e),Number(t))).toArray()}bind(e,t){let r=new ev(e),a=ei(new eg(t));try{eu(this,r,a)}finally{el(1)}}names(){return this.ls(!0,!0)}frame(){return eg.wrap(L._FRAME(this.ptr))}subset(e){if("number"==typeof e)throw Error("Object of type environment is not subsettable");return this.getDollar(e)}toObject({depth:e=0}={}){let t=this.names();return Object.fromEntries([...Array(t.length).keys()].map(r=>[t[r],this.getDollar(t[r]).toJs({depth:e})]))}toJs(e={depth:0},t=1){let r=this.names(),a=[...Array(r.length).keys()].map(a=>e.depth&&t>=e.depth?this.getDollar(r[a]):this.getDollar(r[a]).toJs(e,t+1));return{type:"environment",names:r,values:a}}},eS=class extends eg{constructor(e,t,r){if(e instanceof ed)return ep(e,t),super(e),this;let a={n:0};try{let{names:n,values:s}=eF(e),i=L._Rf_allocVector(ea[t],s.length);eo(i,a),s.forEach(r(i)),eg.wrap(i).setNames(n),super(new ed(i))}finally{el(a.n)}}get length(){return L._LENGTH(this.ptr)}get(e){return super.get(e)}subset(e){return super.subset(e)}getDollar(e){throw Error("$ operator is invalid for atomic vectors")}detectMissing(){let e={n:0};try{let t=L._Rf_lang2(new ev("is.na").ptr,this.ptr);eo(t,e);let r=eW.wrap(eh(t,ez.baseEnv));eo(r,e);let a=r.toTypedArray();return Array.from(a).map(e=>!!e)}finally{el(e.n)}}toArray(){let e=this.toTypedArray();return this.detectMissing().map((t,r)=>t?null:e[r])}toObject({allowDuplicateKey:e=!0,allowEmptyKey:t=!1}={}){let r=this.entries(),a=r.map(([e,t])=>e);if(!e&&new Set(a).size!==a.length)throw Error("Duplicate key when converting atomic vector without allowDuplicateKey enabled");if(!t&&a.some(e=>!e))throw Error("Empty or null key when converting atomic vector without allowEmptyKey enabled");return Object.fromEntries(r.filter((e,t)=>r.findIndex(t=>t[0]===e[0])===t))}entries(){let e=this.toArray(),t=this.names();return e.map((e,r)=>[t?t[r]:null,e])}toJs(){return{type:this.type(),names:this.names(),values:this.toArray()}}},eT=class extends eS{constructor(e){super(e,"logical",c(eT,em))}getBoolean(e){return this.get(e).toArray()[0]}toBoolean(){if(1!==this.length)throw Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getBoolean(1);if(null===e)throw Error("Can't convert missing value `NA` to a JS boolean");return e}toTypedArray(){return new Int32Array(L.HEAP32.subarray(L._LOGICAL(this.ptr)/4,L._LOGICAL(this.ptr)/4+this.length))}toArray(){let e=this.toTypedArray();return this.detectMissing().map((t,r)=>t?null:!!e[r])}},eW=eT;p(eW,em=new WeakMap,e=>{let t=L._LOGICAL(e),r=L.getValue(L._R_NaInt,"i32");return(e,a)=>{L.setValue(t+4*a,null===e?r:!!e,"i32")}});var eM,eO=class extends eS{constructor(e){super(e,"integer",c(eO,eM))}getNumber(e){return this.get(e).toArray()[0]}toNumber(){if(1!==this.length)throw Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getNumber(1);if(null===e)throw Error("Can't convert missing value `NA` to a JS number");return e}toTypedArray(){return new Int32Array(L.HEAP32.subarray(L._INTEGER(this.ptr)/4,L._INTEGER(this.ptr)/4+this.length))}};p(eO,eM=new WeakMap,e=>{let t=L._INTEGER(e),r=L.getValue(L._R_NaInt,"i32");return(e,a)=>{L.setValue(t+4*a,null===e?r:Math.round(Number(e)),"i32")}});var eN,ex=class extends eS{constructor(e){super(e,"double",c(ex,eN))}getNumber(e){return this.get(e).toArray()[0]}toNumber(){if(1!==this.length)throw Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getNumber(1);if(null===e)throw Error("Can't convert missing value `NA` to a JS number");return e}toTypedArray(){return new Float64Array(L.HEAPF64.subarray(L._REAL(this.ptr)/8,L._REAL(this.ptr)/8+this.length))}},eC=ex;p(eC,eN=new WeakMap,e=>{let t=L._REAL(e),r=L.getValue(L._R_NaReal,"double");return(e,a)=>{L.setValue(t+8*a,null===e?r:e,"double")}});var eP,eq=class extends eS{constructor(e){super(e,"complex",c(eq,eP))}getComplex(e){return this.get(e).toArray()[0]}toComplex(){if(1!==this.length)throw Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getComplex(1);if(null===e)throw Error("Can't convert missing value `NA` to a JS object");return e}toTypedArray(){return new Float64Array(L.HEAPF64.subarray(L._COMPLEX(this.ptr)/8,L._COMPLEX(this.ptr)/8+2*this.length))}toArray(){let e=this.toTypedArray();return this.detectMissing().map((t,r)=>t?null:{re:e[2*r],im:e[2*r+1]})}},eL=eq;p(eL,eP=new WeakMap,e=>{let t=L._COMPLEX(e),r=L.getValue(L._R_NaReal,"double");return(e,a)=>{L.setValue(t+8*(2*a),null===e?r:e.re,"double"),L.setValue(t+8*(2*a+1),null===e?r:e.im,"double")}});var eU,eI=class extends eS{constructor(e){super(e,"character",c(eI,eU))}getString(e){return this.get(e).toArray()[0]}toString(){if(1!==this.length)throw Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getString(1);if(null===e)throw Error("Can't convert missing value `NA` to a JS string");return e}toTypedArray(){return new Uint32Array(L.HEAPU32.subarray(L._STRING_PTR(this.ptr)/4,L._STRING_PTR(this.ptr)/4+this.length))}toArray(){return this.detectMissing().map((e,t)=>e?null:L.UTF8ToString(L._R_CHAR(L._STRING_ELT(this.ptr,t))))}},eJ=eI;p(eJ,eU=new WeakMap,e=>(t,r)=>{null===t?L._SET_STRING_ELT(e,r,ez.naString.ptr):L._SET_STRING_ELT(e,r,new eA(t).ptr)});var eD,eV=class extends eS{constructor(e){super(e,"raw",c(eV,eD))}getNumber(e){return this.get(e).toArray()[0]}toNumber(){if(1!==this.length)throw Error("Can't convert atomic vector of length > 1 to a scalar JS value");let e=this.getNumber(1);if(null===e)throw Error("Can't convert missing value `NA` to a JS number");return e}toTypedArray(){return new Uint8Array(L.HEAPU8.subarray(L._RAW(this.ptr),L._RAW(this.ptr)+this.length))}};function eF(e){return en(e)?e:Array.isArray(e)?{names:null,values:e}:e&&"object"==typeof e&&!es(e)?{names:Object.keys(e),values:Object.values(e)}:{names:null,values:[e]}}function eB(e){let t={[ea.null]:eb,[ea.symbol]:ev,[ea.pairlist]:eR,[ea.closure]:ek,[ea.environment]:ej,[ea.call]:e_,[ea.special]:ek,[ea.builtin]:ek,[ea.string]:eA,[ea.logical]:eW,[ea.integer]:eO,[ea.double]:eC,[ea.complex]:eL,[ea.character]:eJ,[ea.list]:eE,[ea.raw]:eV,[ea.function]:ek};return e in t?t[e]:eg}function eG(){}function eH(e,t,r){return async(...a)=>{let n=a.map(e=>er(e)?e._payload:{obj:g(e,er,e=>e._payload),payloadType:"raw"}),s=await e.request({type:"callRObjectMethod",data:{payload:r,prop:t,args:n}});switch(s.payloadType){case"ptr":return e$(e,s);case"raw":return g(s,C,(e,t)=>e$(t,e),e).obj}}}async function eK(e,t,r,a){let n={type:"newRObject",data:{objType:t,obj:g(a,er,e=>e._payload),shelter:r}},s=await e.request(n);switch(s.payloadType){case"raw":throw Error("Unexpected raw payload type returned from newRObject");case"ptr":return e$(e,s)}}function e$(e,t){var r;let a=new Proxy(null!=(r=t.obj.methods)&&r.includes("exec")?Object.assign(eG,{...t}):t,{get:(r,n)=>{var s;return"_payload"===n?t:n===Symbol.asyncIterator?async function*(){let t={type:"callRObjectMethod",data:{payload:a._payload,prop:"getPropertyValue",args:[{payloadType:"raw",obj:"length"}],shelter:void 0}},r=await e.request(t);if("number"!=typeof r.obj)throw Error("Cannot iterate over object, unexpected type for length property.");for(let e=1;e<=r.obj;e++)yield a.get(e)}:null!=(s=t.obj.methods)&&s.includes(n.toString())?eH(e,n.toString(),t):void 0},apply:async(r,a,n)=>{var s;let i=await e$(e,t).exec(...n);return er(i)&&(null==(s=i._payload.obj.methods)?void 0:s.includes("exec"))?i:i.toJs()}});return a}function eQ(e,t,r){return new Proxy(eg,{construct:(a,n)=>eK(e,r,t,...n),get:(t,r)=>eH(e,r.toString())})}p(eV,eD=new WeakMap,e=>{let t=L._RAW(e);return(e,r)=>{L.setValue(t+r,Number(e),"i8")}}),new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakSet;var ez,eX,eY={RArgs:[],REnv:{R_HOME:"/usr/lib/R",R_ENABLE_JIT:"0"},baseUrl:et,serviceWorkerUrl:"",repoUrl:"https://repo.r-wasm.org",homedir:"/home/web_user",interactive:!0,channelType:ee.Automatic},eZ=class{constructor(e={}){var t;p(this,eX,void 0),this.FS={lookupPath:async e=>(await c(this,eX).request({type:"lookupPath",data:{path:e}})).obj,mkdir:async e=>(await c(this,eX).request({type:"mkdir",data:{path:e}})).obj,readFile:async(e,t)=>(await c(this,eX).request({type:"readFile",data:{path:e,flags:t}})).obj,rmdir:async e=>{await c(this,eX).request({type:"rmdir",data:{path:e}})},writeFile:async(e,t,r)=>{await c(this,eX).request({type:"writeFile",data:{path:e,data:t,flags:r}})},unlink:async e=>{await c(this,eX).request({type:"unlink",data:{path:e}})}},y(this,eX,function(e){switch(e.channelType){case ee.SharedArrayBuffer:return new V(e);case ee.ServiceWorker:return new Z(e);case ee.Automatic:default:if(d||crossOriginIsolated)return new V(e);if("serviceWorker"in navigator&&!b(e.serviceWorkerUrl))return new Z(e);throw Error("Can't initialise main thread communication channel")}}(Object.assign(eY,e))),this.objs={},this.Shelter=(t=c(this,eX),new Proxy(e3,{construct:async()=>{let e=new e3(t);return await e.init(),e}}))}async init(){let e=await c(this,eX).initialised;return this.globalShelter=await new this.Shelter,this.RObject=this.globalShelter.RObject,this.RLogical=this.globalShelter.RLogical,this.RInteger=this.globalShelter.RInteger,this.RDouble=this.globalShelter.RDouble,this.RComplex=this.globalShelter.RComplex,this.RCharacter=this.globalShelter.RCharacter,this.RRaw=this.globalShelter.RRaw,this.RList=this.globalShelter.RList,this.RPairlist=this.globalShelter.RPairlist,this.REnvironment=this.globalShelter.REnvironment,this.RSymbol=this.globalShelter.RSymbol,this.RString=this.globalShelter.RString,this.RCall=this.globalShelter.RCall,this.objs={baseEnv:await this.RObject.getPersistentObject("baseEnv"),globalEnv:await this.RObject.getPersistentObject("globalEnv"),null:await this.RObject.getPersistentObject("null"),true:await this.RObject.getPersistentObject("true"),false:await this.RObject.getPersistentObject("false"),na:await this.RObject.getPersistentObject("na")},e}close(){c(this,eX).close()}async read(){return await c(this,eX).read()}async flush(){return await c(this,eX).flush()}write(e){c(this,eX).write(e)}writeConsole(e){this.write({type:"stdin",data:e+`
`})}interrupt(){c(this,eX).interrupt()}async installPackages(e){for(let t of e){let e={type:"installPackage",data:{name:t}};await c(this,eX).request(e)}}async destroy(e){await this.globalShelter.destroy(e)}async evalR(e,t){return this.globalShelter.evalR(e,t)}async evalRVoid(e,t){return this.evalRRaw(e,"void",t)}async evalRBoolean(e,t){return this.evalRRaw(e,"boolean",t)}async evalRNumber(e,t){return this.evalRRaw(e,"number",t)}async evalRString(e,t){return this.evalRRaw(e,"string",t)}async evalRRaw(e,t,r={}){let a=g(r,er,e=>e._payload),n=await c(this,eX).request({type:"evalRRaw",data:{code:e,options:a,outputType:t}});switch(n.payloadType){case"raw":return n.obj;case"ptr":throw Error("Unexpected ptr payload type returned from evalRVoid")}}};eX=new WeakMap;var e1,e0,e2,e3=class{constructor(e){p(this,e1,""),p(this,e0,void 0),p(this,e2,!1),y(this,e0,e)}async init(){c(this,e2)||(y(this,e1,(await c(this,e0).request({type:"newShelter"})).obj),this.RObject=eQ(c(this,e0),c(this,e1),"object"),this.RLogical=eQ(c(this,e0),c(this,e1),"logical"),this.RInteger=eQ(c(this,e0),c(this,e1),"integer"),this.RDouble=eQ(c(this,e0),c(this,e1),"double"),this.RComplex=eQ(c(this,e0),c(this,e1),"complex"),this.RCharacter=eQ(c(this,e0),c(this,e1),"character"),this.RRaw=eQ(c(this,e0),c(this,e1),"raw"),this.RList=eQ(c(this,e0),c(this,e1),"list"),this.RPairlist=eQ(c(this,e0),c(this,e1),"pairlist"),this.REnvironment=eQ(c(this,e0),c(this,e1),"environment"),this.RSymbol=eQ(c(this,e0),c(this,e1),"symbol"),this.RString=eQ(c(this,e0),c(this,e1),"string"),this.RCall=eQ(c(this,e0),c(this,e1),"call"),y(this,e2,!0))}async purge(){let e={type:"shelterPurge",data:c(this,e1)};await c(this,e0).request(e)}async destroy(e){let t={type:"shelterDestroy",data:{id:c(this,e1),obj:e._payload}};await c(this,e0).request(t)}async size(){let e={type:"shelterSize",data:c(this,e1)};return(await c(this,e0).request(e)).obj}async evalR(e,t={}){let r={type:"evalR",data:{code:e,options:g(t,er,e=>e._payload),shelter:c(this,e1)}},a=await c(this,e0).request(r);if("raw"===a.payloadType)throw Error("Unexpected payload type returned from evalR");return e$(c(this,e0),a)}async captureR(e,t={}){let r={type:"captureR",data:{code:e,options:g(t,er,e=>e._payload),shelter:c(this,e1)}},a=await c(this,e0).request(r);switch(a.payloadType){case"ptr":throw Error("Unexpected payload type returned from evalR");case"raw":{let e=a.obj,t=e$(c(this,e0),e.result),r=e.output;for(let e=0;e<r.length;++e)"stdout"!==r[e].type&&"stderr"!==r[e].type&&(r[e].data=e$(c(this,e0),r[e].data));return{result:t,output:r}}}}};e1=new WeakMap,e0=new WeakMap,e2=new WeakMap}}]);